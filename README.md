# yug

`yug` ‚Äî —é–≥, –≤–∞—à –≤–µ—Ä–Ω—ã–π —Å–ª—É–≥–∞ –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –≤–∞—à–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –Ω–∞ —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è C
–∏ C++ –ø–æ–¥ —Å–µ–º–µ–π—Å—Ç–≤–æ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ AVR. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π –∏ –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å 
–¥–ª—è —Å–±–æ—Ä–∫–∏ –∫–æ–¥–∞, –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—à–∏–≤–∫–∏, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö –º–æ–¥—É–ª–µ–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —ç—Ç–∏—Ö 
–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –ø—Ä–æ—á–∏–µ.

–£—Ç–∏–ª–∏—Ç–∞ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –±–æ–ª—å—à–µ–π —Å—Ç–µ–ø–µ–Ω–∏ –¥–ª—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –ª—é–±–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è,
–∞ —Ç–∞–∫–∂–µ –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º—ã–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è UNIX-like
–æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è. 

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ 
```bash
# Debian/Ubuntu
apt install gcc-avr avr-libc avrdude 
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
cargo install --git https://github.com/dx3mod/yug.git
```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

* [–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫](./doc.md#ExternLibs)

–ö–æ–º–∞–Ω–¥—ã:
* [`util`](./doc.md#Util)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–•–æ—Ä–æ—à–æ. –î–∞–≤–∞–π—Ç–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è —Å –±–∞–∑–æ–≤—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ —Å–ª—É–≥–∏ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ 
–ø—Ä–æ—Å—Ç–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –º–∏–≥–∞–Ω–∏—è —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–º, –∫–æ–ª—å —Ç—Ä–∞–¥–∏—Ü–∏—è –≤–µ–ª–µ–ª–∞. 
```bash
# -t      <–º–æ–¥–µ–ª—å-–ú–ö>
# --dev   –£–∫–∞–∑–∞–Ω–∏–µ –ø–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –º–µ—Å—Ç–∞
# blink   –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
$ yug init -t ATtiny13 --dev blink 
```
–í–µ—Å—å —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ [–∑–¥–µ—Å—å](https://avrdude.nongnu.org/user-manual/avrdude_3.html).
–í–∞–∂–Ω–æ –ø–∏—Å–∞—Ç—å –≤ –ø–æ–ª–Ω–æ–π –Ω–æ—Ç–∞—Ü–∏–∏, —Å–æ—Ö—Ä–∞–Ω—è—è —Ä–µ–≥–∏—Å—Ç—Ä!

```bash
$ cd blink
$ tree
.
‚îú‚îÄ‚îÄ include
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ spec.h
‚îú‚îÄ‚îÄ src
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ main.c
‚îî‚îÄ‚îÄ yug.toml
```
* `include` - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏. 
  - `spec.h` - –§–∞–π–ª —Å –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏ –¥–ª—è –±–∞–∑–æ–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã
  —è–∑—ã–∫–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞, —Ä–æ–≤–Ω–æ –∫–∞–∫ –∏ —Ñ–∞–π–ª `.clangd`.
* `src` - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å —Ñ–∞–π–ª–∞–º–∏ –∏—Å—Ö–æ–¥–Ω—ã—Ö –∫–æ–¥–æ–≤. 
* `yug.toml` - –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –≤–∞—à–∏—Ö –ø–æ–≤–µ–ª–µ–Ω–∏–π. 

–í—Å—ë –≥–æ—Ç–æ–≤–æ, –∞ –ø–æ—ç—Ç–æ–º—É –Ω–∞–ø–∏—à–µ–º –Ω–µ–∑–∞–º—ã—Å–ª–æ–≤–∞—Ç—ã–π –∫–æ–¥:
```c
#include "spec.h"
#include <avr/io.h>
#include <util/delay.h>

int main(void) {
  DDRB |= _BV(PB4);

  while (1) {
    PORTB ^= _BV(PB4);
    _delay_ms(1000);
  }
}
```

–ò –æ—Å—Ç–∞–ª–æ—Å—å –∑–∞ –º–∞–ª—ã–º! –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –µ–≥–æ –Ω–∞ —Å–∞–º –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —á–µ—Ä–µ–∑ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä
USBASP. –î–ª—è —ç—Ç–æ–≥–æ –≤—ã–ø–æ–ª–Ω–∏–º —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
$ yug build
$ yug flash
```

–ì–æ—Ç–æ–≤–æ. üê™

### –°—Å—ã–ª–∫–∏ –Ω–∞ –Ω–∞—Å

* –ù–∞—à—É —É—Ç–∏–ª–∏—Ç—É –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–º [—Å–±–æ—Ä–Ω–∏–∫–µ –∫–æ–Ω—Å–ø–µ–∫—Ç–æ–≤ –ª–µ–∫—Ü–∏–π –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é –ú–ö AVR](https://dx3mod.github.io/mktyt) –≤ 
–∫–∞—á–µ—Å—Ç–≤–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞. –≠—Ç–æ —Ç–∞–∫–∂–µ –Ω–∞—à –ø—Ä–æ–µ–∫—Ç, —á–µ–≥–æ –æ—Ç –≥—Ä–µ—Ö–∞ —Ç–∞–∏—Ç—å, –ø–æ—ç—Ç–æ–º—É –≤ –Ω—ë–º —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç—Å—è
–≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏.
